{% extends 'base.html.twig' %}

{% block title %}Nos Services - CrÃ©a'Tech{% endblock %}

{% block body %}
    <div class="container mx-auto px-4 py-12">
        
        {# --- EN-TÃŠTE --- #}
        <div class="text-center mb-16 animate-fade-in-up">
            <h1 class="text-4xl md:text-5xl font-bold font-heading mb-4 text-secondary">
                Nos <span class="text-primary">Services</span>
            </h1>
            <p class="text-lg opacity-70 max-w-2xl mx-auto">
                Des solutions digitales sur-mesure pour propulser votre activitÃ©.
            </p>
        </div>

        {# --- DÃ‰BUT DE LA CONDITION PRINCIPALE --- #}
        {% if prestations is empty %}
            
            {# CAS 1 : Pas de prestations #}
            <div class="text-center py-20 bg-base-200 rounded-box shadow-inner">
                <p class="text-xl opacity-60">ðŸš€ Nos offres arrivent trÃ¨s bientÃ´t !</p>
                <a href="{{ path('app_contact') }}" class="btn btn-primary mt-6">Nous contacter</a>
            </div>

        {% else %}
            
            {# CAS 2 : Il y a des prestations (Affichage de la grille) #}
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                
                {% for prestation in prestations %}
                    <div class="card bg-base-100 shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 border border-base-200 flex flex-col h-full">
                        
                        <div class="card-body flex-grow">
                            <h2 class="card-title text-2xl text-secondary mb-2 min-h-[4rem] items-end ">
                                {{ prestation.titre }}
                            </h2>
                            
                            <div class="opacity-80 mb-6 text-sm leading-relaxed line-clamp-3 min-h-[5rem]">
                                {{ prestation.descriptionCourte }}
                            </div>

                            {# --- ZONE IMAGES (Gestion des 6 cas) --- #}
                            <figure class="px-4 pt-4">
                                <div class="h-48 w-full rounded-xl overflow-hidden border border-base-200 relative group">
                                    
                                    {% if loop.index == 1 %}
                                        <img src="{{ asset('/img/sitevitrine.png') }}" alt="{{ prestation.titre }}" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110" />
                                    
                                    {% elseif loop.index == 2 %}
                                        <img src="{{ asset('/img/boutiqueecommerce.png') }}" alt="{{ prestation.titre }}" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110" />
                                    
                                    {% elseif loop.index == 3 %}
                                        <img src="{{ asset('/img/applicationmobile.png') }}" alt="{{ prestation.titre }}" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110" />

                                    {% elseif loop.index == 4 %}
                                        <img src="{{ asset('/img/seo.png') }}" alt="{{ prestation.titre }}" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110" />

                                    {% elseif loop.index == 5 %}
                                        <img src="{{ asset('/img/maintenanceweb.png') }}" alt="{{ prestation.titre }}" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110" />

                                    {% elseif loop.index == 6 %}
                                        <img src="{{ asset('/img/depannage.png') }}" alt="{{ prestation.titre }}" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110" />
                                    
                                    {% else %}
                                        <img src="{{ asset('images/default.jpg') }}" alt="Default" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110" />
                                    {% endif %} 
                                    {# ^^^ Ce endif ferme la condition des images ^^^ #}

                                </div>
                            </figure>

                            <div class="card-actions justify-end items-center mt-auto border-t border-base-200 pt-4 w-full">
                                <a href="{{ path('app_prestation_show', {'slug': prestation.slug}) }}" class="btn btn-sm btn-ghost text-primary">
                                    En savoir plus
                                </a>
                                <a href="{{ path('app_contact') }}" class="btn btn-sm btn-primary">
                                    Commander
                                </a>
                            </div>
                        </div>
                    </div>
                {% endfor %} 
                {# ^^^ Ce endfor ferme la boucle des cartes ^^^ #}

            </div>
            
        {% endif %} 
        {# ^^^ Ce endif est CRUCIAL (ferme le "if prestations is empty") ^^^ #}
        
    </div>
{% endblock %} 
{# ^^^ Ce endblock est CRUCIAL (ferme le block body) ^^^ #}